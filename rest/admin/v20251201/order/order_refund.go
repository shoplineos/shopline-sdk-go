// Package order generated by SHOPLINE since v20251201
package order

import (
	"errors"

	"github.com/shoplineos/shopline-sdk-go/client"
)

type OrderRefundAPIReq struct {
	client.BaseAPIRequest
	/*
	   settlement currency of the order, which is optional. If the input currency is null, the application will verify whether the order settlement currency is the store currency, If it is not the store currency, an error will be reported, prompting like: "currency must be X”;
	   If the input currency is passed, check whether the currency is the settlement currency of the order. If not, an error will be reported and the prompt will be: "currency must be X"
	   Example:
	*/
	Currency string `json:"currency,omitempty" url:"-"`

	/*
	   Refund Notes
	   Example: Refund
	*/
	Note string `json:"note,omitempty" url:"-"`

	/*
	   Send message notifications ( logic with existing b-end refund message )
	   Example: true
	*/
	Notify bool `json:"notify,omitempty" url:"-"`

	/*
	   Order number
	   Example: 21057520029298437725452511
	*/
	OrderId string `json:"order_id,omitempty" url:"-"`

	/*
	   Refund order launch time
	   Example: Format : 2023-04-12T22 : 59 : 52+08 : 00
	*/
	ProcessedAt string `json:"processed_at,omitempty" url:"-"`

	/*
	   Refund Product line information , can be associated with multiple Product lines
	   Example: [map[line_item_id:601 location_id:5409714787218633772 quantity:1 restock_type:return type:Unshipped]]
	*/
	RefundLineItems []OrderRefundAPIReqRefundLineItem `json:"refund_line_items,omitempty" url:"-"`

	/*
	   Refund policy for shipping amount
	   Example: map[amount:1.23 full_refund:true]
	*/
	Shipping OrderRefundAPIReqShipping `json:"shipping,omitempty" url:"-"`

	/*
	   Payment slip refund information
	   Example: [map[amount:2.34 currency: gateway:Paypal id:23057520029306658561302511 kind:refund type:true]]
	*/
	Transactions []OrderRefundAPIReqTransaction `json:"transactions,omitempty" url:"-"`
}

type OrderRefundAPIReqShipping struct {
	/*
	   Specify refund amount
	   Example: 1.23
	*/
	Amount string `json:"amount,omitempty" url:"-"`

	/*
	   Return shipping fee or not
	   Example: true
	*/
	FullRefund bool `json:"full_refund,omitempty" url:"-"`
}

type OrderRefundAPIReqTransaction struct {
	/*
	   Refund type , ture : refund on the original road
	   Example: true
	*/
	Type bool `json:"type,omitempty" url:"-"`

	/*
	   Refund amount, which the settlement currency amount corresponding to the payment order
	   Example: 2.34
	*/
	Amount string `json:"amount,omitempty" url:"-"`

	/*
	   the settlement currency of the payment, which is optional. If the input currency is null, the application will verify whether the currency is the store currency, If it is not the store currency, an error will be reported and promp like: "the input currency must be the settlement currency of the payment:X”; If the input currency is passed, check whether the currency is the settlement currency of the payment. If not, an error will be reported and the prompt will be the same as above
	   Example:
	*/
	Currency string `json:"currency,omitempty" url:"-"`

	/*
	   Payment channels
	   Example: Paypal
	*/
	Gateway string `json:"gateway,omitempty" url:"-"`

	/*
	   Payment slip number , start with 230
	   Example: 23057520029306658561302511
	*/
	Id string `json:"id,omitempty" url:"-"`

	/*
	   Payment slip type
	   Example: refund
	*/
	Kind string `json:"kind,omitempty" url:"-"`
}

type OrderRefundAPIReqRefundLineItem struct {
	/*
	   Product inventory processing
	   Example: return
	*/
	RestockType string `json:"restock_type,omitempty" url:"-"`

	/*
	   Dangyi shipping status is required when making a refund when in Product Unshipped : Product not shipped , Returned : the product has been returned
	   Example: Unshipped
	*/
	Type string `json:"type,omitempty" url:"-"`

	/*
	   Product row id
	   Example: 601
	*/
	LineItemId int64 `json:"line_item_id,omitempty" url:"-"`

	/*
	   Product stock back place
	   Example: 5409714787218633772
	*/
	LocationId string `json:"location_id,omitempty" url:"-"`

	/*
	   Trial refund Product quantity
	   Example: 1
	*/
	Quantity int64 `json:"quantity,omitempty" url:"-"`
}

func (req *OrderRefundAPIReq) GetEndpoint() string {

	return "order/refund.json"

}

func (req *OrderRefundAPIReq) GetMethod() string {
	return "POST"
}

func (req *OrderRefundAPIReq) GetData() interface{} {
	return req
}

// Verify the api request parameters
func (req *OrderRefundAPIReq) Verify() error {

	if req.OrderId == "" {
		return errors.New("OrderId is required")
	}

	return nil
}

func (req *OrderRefundAPIReq) NewAPIResp() *OrderRefundAPIResp {
	return &OrderRefundAPIResp{}
}

type OrderRefundAPIResp struct {
	client.BaseAPIResponse
	/*
	   Data return body
	   Example: map[create_at:1673404700862 id:2605755870074105241861 note:Remark order_adjustments:[map[amount:2.34 amount_set:map[presentment_money:map[amount:2.34 currency_code:USD] shop_money:map[amount:2.34 currency_code:USD]] id: kind:refund_discrepancy order_id:21057520029298437725452511 reason:refund_discrepancy refund_id: tax_amount:978 tax_amount_set:map[presentment_money:map[amount:2.34 currency_code:USD] shop_money:map[amount:3.45 currency_code:USD]]]] order_id:21057520029298437725452511 refund_line_items:[map[id:0 line_item_id:601 quantity:1 restock_type:return subtotal:3.45 subtotal_set:map[presentment_money:map[amount:1.23 currency_code:USD] shop_money:map[amount:2.36 currency_code:USD]] total_tax:4.56 total_tax_set:map[presentment_money:map[amount:3.24 currency_code:USD] shop_money:map[amount:6.14 currency_code:USD]]]] total_duties_set:map[presentment_money:map[amount:8.88 currency_code:USD] shop_money:map[amount:8.88 currency_code:USD]] transactions:[map[amount:0 create_at:1673404700862 currency:USD id:23057520029306658561302511 kind:refund order_id:21057520029298437725452511 processed_at:1673404700862 status:pending]]]
	*/
	Data OrderRefundAPIRespData `json:"data,omitempty" url:"-"`
}

type OrderRefundAPIRespData struct {
	/*
	   Order number associated with this refund order
	   Example: 21057520029298437725452511
	*/
	OrderId string `json:"order_id,omitempty" url:"-"`

	/*
	   Refund related Product line information
	   Example: [map[id:0 line_item_id:601 quantity:1 restock_type:return subtotal:3.45 subtotal_set:map[presentment_money:map[amount:1.23 currency_code:USD] shop_money:map[amount:2.36 currency_code:USD]] total_tax:4.56 total_tax_set:map[presentment_money:map[amount:3.24 currency_code:USD] shop_money:map[amount:6.14 currency_code:USD]]]]
	*/
	RefundLineItems []OrderRefundAPIRespRefundLineItem `json:"refund_line_items,omitempty" url:"-"`

	/*
	   Refund total duty
	   Example: map[presentment_money:map[amount:8.88 currency_code:USD] shop_money:map[amount:8.88 currency_code:USD]]
	*/
	TotalDutiesSet TotalDutiesSet `json:"total_duties_set,omitempty" url:"-"`

	/*
	   Refund payment slip information
	   Example: [map[amount:0 create_at:1673404700862 currency:USD id:23057520029306658561302511 kind:refund order_id:21057520029298437725452511 processed_at:1673404700862 status:pending]]
	*/
	Transactions []OrderRefundAPIRespTransaction `json:"transactions,omitempty" url:"-"`

	/*
	   Refund single creation time
	   Example: 1673404700862
	*/
	CreateAt string `json:"create_at,omitempty" url:"-"`

	/*
	   Refund id , unique recognition
	   Example: 2605755870074105241861
	*/
	Id string `json:"id,omitempty" url:"-"`

	/*
	   Refund Notes
	   Example: Remark
	*/
	Note string `json:"note,omitempty" url:"-"`

	/*
	   Adjust the order information
	   Example: [map[amount:2.34 amount_set:map[presentment_money:map[amount:2.34 currency_code:USD] shop_money:map[amount:2.34 currency_code:USD]] id: kind:refund_discrepancy order_id:21057520029298437725452511 reason:refund_discrepancy refund_id: tax_amount:978 tax_amount_set:map[presentment_money:map[amount:2.34 currency_code:USD] shop_money:map[amount:3.45 currency_code:USD]]]]
	*/
	OrderAdjustments []OrderAdjustment `json:"order_adjustments,omitempty" url:"-"`
}

type OrderRefundAPIRespRefundLineItem struct {
	/*
	   Return- returns only not back
	   Example: return
	*/
	RestockType string `json:"restock_type,omitempty" url:"-"`

	/*
	   Refund Product row total amount , accuracy 2
	   Example: 3.45
	*/
	Subtotal string `json:"subtotal,omitempty" url:"-"`

	/*
	   Total amount of refund Product bank by store currency and transaction currency
	   Example: map[presentment_money:map[amount:1.23 currency_code:USD] shop_money:map[amount:2.36 currency_code:USD]]
	*/
	SubtotalSet SubtotalSet `json:"subtotal_set,omitempty" url:"-"`

	/*
	   Refund Product row tax total amount , accuracy 2
	   Example: 4.56
	*/
	TotalTax string `json:"total_tax,omitempty" url:"-"`

	/*
	   Total amount of refund Product bank tax , sold in store currency and transaction currency
	   Example: map[presentment_money:map[amount:3.24 currency_code:USD] shop_money:map[amount:6.14 currency_code:USD]]
	*/
	TotalTaxSet TotalTaxSet `json:"total_tax_set,omitempty" url:"-"`

	/*
	   Product row id
	   Example: 0
	*/
	Id int64 `json:"id,omitempty" url:"-"`

	/*
	   The ID of the product snapshot table, generated by the system, uniquely confirms a product with the order number
	   Example: 601
	*/
	LineItemId int64 `json:"line_item_id,omitempty" url:"-"`

	/*
	   Refund Product quantity
	   Example: 1
	*/
	Quantity int64 `json:"quantity,omitempty" url:"-"`
}

type OrderRefundAPIRespTransaction struct {
	/*
	   Payment slip type , here is only refund
	   Example: refund
	*/
	Kind string `json:"kind,omitempty" url:"-"`

	/*
	   Order number for this adjustment of the single link
	   Example: 21057520029298437725452511
	*/
	OrderId string `json:"order_id,omitempty" url:"-"`

	/*
	   Refund form update time
	   Example: 1673404700862
	*/
	ProcessedAt string `json:"processed_at,omitempty" url:"-"`

	/*
	   Handling status, pending, failure, success, and error
	   Example: pending
	*/
	Status string `json:"status,omitempty" url:"-"`

	/*
	   The refund amount corresponding to the settlement currency of the refund payment order, precision 2
	   Example: 0
	*/
	Amount int64 `json:"amount,omitempty" url:"-"`

	/*
	   Creation time
	   Example: 1673404700862
	*/
	CreateAt string `json:"create_at,omitempty" url:"-"`

	/*
	   Payment currency , payment slip corresponding settlement currency
	   Example: USD
	*/
	Currency string `json:"currency,omitempty" url:"-"`

	/*
	   Payment slip number
	   Example: 23057520029306658561302511
	*/
	Id string `json:"id,omitempty" url:"-"`
}
