// Package order generated by SHOPLINE since v20251201
package order

import (
	"errors"
	"fmt"

	"github.com/shoplineos/shopline-sdk-go/client"
)

type OrderRefundTrialAPIReq struct {
	client.BaseAPIRequest
	/*
	   Order id
	   Example:
	*/
	OrderId string `url:"-" json:"-"` // Required
	/*
	   Trial Product
	   Example: [map[line_item_id:"12343423111" quantity:1 type:]]
	*/
	RefundLineItems []OrderRefundTrialAPIReqRefundLineItem `json:"refund_line_items,omitempty" url:"-"`

	/*
	   Shipping rates
	   Example: map[amount:"10.00" full_refund:true]
	*/
	Shipping OrderRefundTrialAPIReqShipping `json:"shipping,omitempty" url:"-"`

	/*
	   Settlement currency of the order, which is optional. If the input currency is null, the application will verify whether the order settlement currency is the store currency, If it is not the store currency, an error will be reported, prompting like: "currency must be X‚Äù;
	   If the input currency is passed, check whether the currency is the settlement currency of the order. If not, an error will be reported and the prompt will be: "currency must be X"
	   Example: USD
	*/
	Currency string `json:"currency,omitempty" url:"-"`
}

type OrderRefundTrialAPIReqRefundLineItem struct {
	/*
	   The Product to calculate belongs to , Unshipped : Product not shipped ,  Returned : the product has been returned
	   Example:
	*/
	Type string `json:"type,omitempty" url:"-"`

	/*
	   Trial refund Product row id
	   Example: "12343423111"
	*/
	LineItemId string `json:"line_item_id,omitempty" url:"-"`

	/*
	   Trial refund Product quantity
	   Example: 1
	*/
	Quantity int64 `json:"quantity,omitempty" url:"-"`
}

type OrderRefundTrialAPIReqShipping struct {
	/*
	   Return shipping fee or not
	   Example: true
	*/
	FullRefund bool `json:"full_refund,omitempty" url:"-"`

	/*
	   Shipping amount to be returned , double type string , accuracy 2
	   Example: "10.00"
	*/
	Amount string `json:"amount,omitempty" url:"-"`
}

func (req *OrderRefundTrialAPIReq) GetEndpoint() string {

	return fmt.Sprintf("orders/%s/refunds/calculate.json", req.OrderId)

}

func (req *OrderRefundTrialAPIReq) GetMethod() string {
	return "POST"
}

func (req *OrderRefundTrialAPIReq) GetData() interface{} {
	return req
}

// Verify the api request parameters
func (req *OrderRefundTrialAPIReq) Verify() error {

	if req.OrderId == "" {
		return errors.New("OrderId is required")
	}

	return nil
}

func (req *OrderRefundTrialAPIReq) NewAPIResp() *OrderRefundTrialAPIResp {
	return &OrderRefundTrialAPIResp{}
}

type OrderRefundTrialAPIResp struct {
	client.BaseAPIResponse
	/*
	   Trial results
	   Example: map[currency:USD refund_line_items:[map[discount_total_amount:"199.00" line_item_id:"33121216544" price:"199.00" quantity:1 subtotal:"195.67" total_tax:"195.67" type:]] shipping:map[amount:"5.00" maximum_refundable:"10.00" tax:"1.00"] total_duties_set:map[presentment_money:map[amount:8.88 currency_code:"USD"] shop_money:map[amount:8.88 currency_code:USD]] transactons:[map[amount:"41.89" currency:USD gateway:bogus kind:suggested_refund maximum_refundable:"41.89" order_id:"21056836827909126061559008" parent_id:"26056836827909126061559008"]]]
	*/
	Refund OrderRefundTrialAPIRespRefund `json:"refund,omitempty" url:"-"`
}

type Shipping struct {
	/*
	   Order shipping
	   Example: "5.00"
	*/
	Amount string `json:"amount,omitempty" url:"-"`

	/*
	   Maximum return shipping
	   Example: "10.00"
	*/
	MaximumRefundable string `json:"maximum_refundable,omitempty" url:"-"`

	/*
	   Order shipping tax
	   Example: "1.00"
	*/
	Tax string `json:"tax,omitempty" url:"-"`
}

type Transacton struct {
	/*
	   the currency, which the settlement currency corresponding of the payment
	   Example: USD
	*/
	Currency string `json:"currency,omitempty" url:"-"`

	/*
	   Payment channels
	   Example: bogus
	*/
	Gateway string `json:"gateway,omitempty" url:"-"`

	/*
	   suggested_refund
	   Example: suggested_refund
	*/
	Kind string `json:"kind,omitempty" url:"-"`

	/*
	   Current payment slip when the largest amount is returned
	   Example: "41.89"
	*/
	MaximumRefundable string `json:"maximum_refundable,omitempty" url:"-"`

	/*
	   Order number
	   Example: "21056836827909126061559008"
	*/
	OrderId string `json:"order_id,omitempty" url:"-"`

	/*
	   Payment slip number
	   Example: "26056836827909126061559008"
	*/
	ParentId string `json:"parent_id,omitempty" url:"-"`

	/*
	   payment amount, which the corresponding amount in the settlement currency of the payment order
	   Example: "41.89"
	*/
	Amount string `json:"amount,omitempty" url:"-"`
}

type OrderRefundTrialAPIRespRefundLineItem struct {
	/*
	   Product should be refunded
	   Example: "195.67"
	*/
	Subtotal string `json:"subtotal,omitempty" url:"-"`

	/*
	   Product the tax refund amount should be available
	   Example: "195.67"
	*/
	TotalTax string `json:"total_tax,omitempty" url:"-"`

	/*
	   The Product to calculate belongs to , Unshipped : Product not shipped , Shipped : Product has been shipped , Returned : the product has been returned
	   Example:
	*/
	Type string `json:"type,omitempty" url:"-"`

	/*
	   Product total discount amount
	   Example: "199.00"
	*/
	DiscountTotalAmount string `json:"discount_total_amount,omitempty" url:"-"`

	/*
	   Product line ( Product line in ginseng )
	   Example: "33121216544"
	*/
	LineItemId string `json:"line_item_id,omitempty" url:"-"`

	/*
	   Product selling price
	   Example: "199.00"
	*/
	Price string `json:"price,omitempty" url:"-"`

	/*
	   Quantity ( actual can be returned )
	   Example: 1
	*/
	Quantity int `json:"quantity,omitempty" url:"-"`
}

type OrderRefundTrialAPIRespRefund struct {
	/*
	   When shipping charges are required return
	   Example: map[amount:"5.00" maximum_refundable:"10.00" tax:"1.00"]
	*/
	Shipping Shipping `json:"shipping,omitempty" url:"-"`

	/*
	   Refund total duty
	   Example: map[presentment_money:map[amount:8.88 currency_code:"USD"] shop_money:map[amount:8.88 currency_code:USD]]
	*/
	TotalDutiesSet TotalDutiesSet `json:"total_duties_set,omitempty" url:"-"`

	/*
	   When the trial amount is greater than 0 , the original return system automatically returns the payment slip and amount according to the rules
	   Example: [map[amount:"41.89" currency:USD gateway:bogus kind:suggested_refund maximum_refundable:"41.89" order_id:"21056836827909126061559008" parent_id:"26056836827909126061559008"]]
	*/
	Transactons []Transacton `json:"transactons,omitempty" url:"-"`

	/*
	   the currency, which the settlement currency corresponding to the refund
	   Example: USD
	*/
	Currency string `json:"currency,omitempty" url:"-"`

	/*
	   When Product should return the amount to the request for trial , return
	   Example: [map[discount_total_amount:"199.00" line_item_id:"33121216544" price:"199.00" quantity:1 subtotal:"195.67" total_tax:"195.67" type:]]
	*/
	RefundLineItems []OrderRefundTrialAPIRespRefundLineItem `json:"refund_line_items,omitempty" url:"-"`
}
